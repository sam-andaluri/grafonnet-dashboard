{
   "description": "Dashboard for GPU Clusters\n",
   "graphTooltip": 1,
   "panels": [
      {
         "collapsed": true,
         "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 0
         },
         "id": 1,
         "panels": [
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "mappings": [
                        {
                           "options": {
                              "0": {
                                 "color": "red",
                                 "text": "down"
                              },
                              "1": {
                                 "color": "green",
                                 "text": "up"
                              }
                           },
                           "type": "value"
                        }
                     ],
                     "unit": "none"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 2,
               "options": {
                  "showValue": "never"
               },
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "rdma_device_status==0",
                     "legendFormat": "{{hostname}} {{rdma_device}}"
                  },
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "rdma_device_status==1",
                     "legendFormat": "{{hostname}} {{rdma_device}}"
                  }
               ],
               "title": "RDMA Device Status",
               "type": "state-timeline"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "mappings": [
                        {
                           "options": {
                              "0": {
                                 "color": "red",
                                 "text": "down"
                              },
                              "1": {
                                 "color": "green",
                                 "text": "up"
                              }
                           },
                           "type": "value"
                        }
                     ],
                     "unit": "none"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 8,
                  "y": 0
               },
               "id": 3,
               "options": {
                  "showValue": "never"
               },
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "rttcc_status==0",
                     "legendFormat": "{{hostname}} {{rdma_device}}"
                  },
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "rttcc_status==1",
                     "legendFormat": "{{hostname}} {{rdma_device}}"
                  }
               ],
               "title": "RTTCC Status",
               "type": "state-timeline"
            }
         ],
         "title": "Health Status",
         "type": "row"
      },
      {
         "collapsed": true,
         "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 1
         },
         "id": 4,
         "panels": [
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "percent"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 5,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by (cluster_name) (node_load1)",
                     "legendFormat": "1m load average {{cluster_name}}"
                  }
               ],
               "title": "Cluster 1m load average",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "percent"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 8,
                  "y": 0
               },
               "id": 6,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by (cluster_name) (node_load5)",
                     "legendFormat": "5m load average {{cluster_name}}"
                  }
               ],
               "title": "Cluster 5m load average",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "percent"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 16,
                  "y": 0
               },
               "id": 7,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by (cluster_name) (node_load15)",
                     "legendFormat": "15m load average {{cluster_name}}"
                  }
               ],
               "title": "Cluster 15m load average",
               "type": "timeseries"
            }
         ],
         "title": "Cluster Metrics",
         "type": "row"
      },
      {
         "collapsed": true,
         "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 2
         },
         "id": 8,
         "panels": [
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "percent"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 9,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "(node_load1{hostname=~\"$hostname\"})",
                     "legendFormat": "{{hostname}}"
                  }
               ],
               "title": "Instance 1m load average",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "percent"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 8,
                  "y": 0
               },
               "id": 10,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "(node_load5{hostname=~\"$hostname\"})",
                     "legendFormat": "{{hostname}}"
                  }
               ],
               "title": "Instance 5m load average",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "percent"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 16,
                  "y": 0
               },
               "id": 11,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "(node_load15{hostname=~\"$hostname\"})",
                     "legendFormat": "{{hostname}}"
                  }
               ],
               "title": "Instance 15m load average",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "percent"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 12,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "ceil((1 - (node_memory_MemAvailable_bytes{hostname=~\"$hostname\"}/node_memory_MemTotal_bytes{hostname=~\"$hostname\"}))*100)",
                     "legendFormat": "{{hostname}}"
                  }
               ],
               "title": "Memory utilization",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "percent"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 8,
                  "y": 0
               },
               "id": 13,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "ceil((1 - (node_filesystem_avail_bytes{mountpoint=~\"$mountpoint\",device!~\"rootfs\"} / node_filesystem_size_bytes{mountpoint=~\"$mountpoint\",device!~\"rootfs\"}))*100)",
                     "legendFormat": "{{mountpoint}}"
                  }
               ],
               "title": "Storage utilization",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "iops"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 16,
                  "y": 0
               },
               "id": 14,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "irate(node_disk_reads_completed_total[$__rate_interval])",
                     "legendFormat": "{{hostname}} {{device}}"
                  }
               ],
               "title": "Disk reads completed iops",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "iops"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 15,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "irate(node_disk_writes_completed_total[$__rate_interval])",
                     "legendFormat": "{{hostname}} {{device}}"
                  }
               ],
               "title": "Disk writes completed iops",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "MiBs"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 8,
                  "y": 0
               },
               "id": 16,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "irate(node_disk_read_bytes_total[$__rate_interval])",
                     "legendFormat": "{{hostname}} {{device}}"
                  }
               ],
               "title": "Disk read bytes",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "MiBs"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 16,
                  "y": 0
               },
               "id": 17,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "irate(node_disk_written_bytes_total[$__rate_interval])",
                     "legendFormat": "{{hostname}} {{device}}"
                  }
               ],
               "title": "Disk write bytes",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "percentunit"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 18,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "irate(node_disk_io_time_seconds_total[$__rate_interval])",
                     "legendFormat": "{{hostname}} {{device}}"
                  }
               ],
               "title": "Time spent doing I/Os",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "MiBs"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 8,
                  "y": 0
               },
               "id": 19,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "rate(node_network_receive_bytes_total{hostname=~\"$hostname\",device=~\"$device\"}[$__rate_interval])",
                     "legendFormat": "{{hostname}} {{device}}"
                  }
               ],
               "title": "Network Traffic Received",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "MiBs"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 16,
                  "y": 0
               },
               "id": 20,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "rate(node_network_transmit_bytes_total{hostname=~\"$hostname\",device=~\"$device\"}[$__rate_interval])",
                     "legendFormat": "{{hostname}} {{device}}"
                  }
               ],
               "title": "Network Traffic Sent",
               "type": "timeseries"
            }
         ],
         "title": "Node Metrics",
         "type": "row"
      },
      {
         "collapsed": true,
         "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 3
         },
         "id": 21,
         "panels": [
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "MiBs"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 22,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "rate(node_mountstats_nfs_total_read_bytes_total[$__range])",
                     "legendFormat": "{{hostname}} - {{export}}"
                  }
               ],
               "title": "Read Throughput",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "MiBs"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 8,
                  "y": 0
               },
               "id": 23,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "rate(node_mountstats_nfs_total_write_bytes_total[$__range])",
                     "legendFormat": "{{hostname}} - {{export}}"
                  }
               ],
               "title": "Write Throughput",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "iops"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 16,
                  "y": 0
               },
               "id": 24,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "sum by(hostname) (rate(node_mountstats_nfs_operations_requests_total{operation!~\"READ|WRITE\"}[$__range]))",
                     "legendFormat": "{{hostname}}"
                  }
               ],
               "title": "Metadata IOPS",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "iops"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 25,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "sum by(hostname) (rate(node_mountstats_nfs_operations_requests_total{operation=~\"READ|WRITE\"}[$__range]))",
                     "legendFormat": "{{hostname}}"
                  }
               ],
               "title": "Read/Write IOPS",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "cps"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 8,
                  "y": 0
               },
               "id": 26,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "sum by(hostname, export) (node_nfs_rpc_retransmissions_total)",
                     "legendFormat": "{{hostname}} - {{export}}"
                  }
               ],
               "title": "NFS Retransmissions",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "s"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 16,
                  "y": 0
               },
               "id": 27,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(hostname, export) (rate(node_mountstats_nfs_operations_request_time_seconds_total[$__range]))",
                     "legendFormat": "{{hostname}} - {{export}}"
                  }
               ],
               "title": "NFS Request Time",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "s"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 28,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(hostname, export) (rate(node_mountstats_nfs_operations_response_time_seconds_total[$__range]))",
                     "legendFormat": "{{hostname}} - {{export}}"
                  }
               ],
               "title": "NFS Response Time",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "s"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 8,
                  "y": 0
               },
               "id": 29,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(hostname, export) (rate(node_mountstats_nfs_operations_queue_time_seconds_total[$__range]))",
                     "legendFormat": "{{hostname}} - {{export}}"
                  }
               ],
               "title": "NFS Queue Time",
               "type": "timeseries"
            }
         ],
         "title": "NFS Metrics",
         "type": "row"
      },
      {
         "collapsed": true,
         "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 4
         },
         "id": 30,
         "panels": [
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "hertz"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 31,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_SM_CLOCK{Hostname=~\"$hostname\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "SM Clock",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "hertz"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 8,
                  "y": 0
               },
               "id": 32,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_MEM_CLOCK{Hostname=~\"$hostname\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "Memory Clock",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "celsius"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 16,
                  "y": 0
               },
               "id": 33,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_MEMORY_TEMP{Hostname=~\"$hostname\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "Memory temperature (in C)",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "celsius"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 34,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_GPU_TEMP{Hostname=~\"$hostname\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "GPU temperature (in C)",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "watts"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 8,
                  "y": 0
               },
               "id": 35,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_POWER_USAGE{Hostname=~\"$hostname\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "Power draw (in W)",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "joules"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 16,
                  "y": 0
               },
               "id": 36,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_TOTAL_ENERGY_CONSUMPTION{Hostname=~\"$hostname\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "Total energy consumption since boot (in mJ)",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "none"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 37,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_PCIE_REPLAY_COUNTER{Hostname=~\"$hostname\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "Total number of PCIe retries",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "percent"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 8,
                  "y": 0
               },
               "id": 38,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_GPU_UTIL{Hostname=~\"$hostname\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "GPU Utilization",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "percent"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 16,
                  "y": 0
               },
               "id": 39,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_MEM_COPY_UTIL{Hostname=~\"$hostname\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "Memory Copy Utilization",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "percent"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 40,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_ENC_UTIL{Hostname=~\"$hostname\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "Encoder Utilization",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "percent"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 8,
                  "y": 0
               },
               "id": 41,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_DEC_UTIL{Hostname=~\"$hostname\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "Decoder Utilization",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "none"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 16,
                  "y": 0
               },
               "id": 42,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_XID_ERRORS{Hostname=~\"$hostname\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "Value of the last XID error encountered",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "megabytes"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 43,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_FB_FREE{Hostname=~\"$hostname\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "Framebuffer memory free (in MiB)",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "megabytes"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 8,
                  "y": 0
               },
               "id": 44,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_FB_USED{Hostname=~\"$hostname\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "Framebuffer memory used (in MiB)",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "none"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 16,
                  "y": 0
               },
               "id": 45,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_NVLINK_BANDWIDTH_TOTAL{Hostname=~\"$hostname\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "Total number of NVLink bandwidth counters for all lanes",
               "type": "timeseries"
            }
         ],
         "title": "GPU Metrics",
         "type": "row"
      },
      {
         "collapsed": true,
         "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 5
         },
         "id": 46,
         "panels": [
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "cps"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 47,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_ECC_SBE_VOL_TOTAL{Hostname=~\"$hostname\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "Total number of single-bit volatile ECC errors",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "cps"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 8,
                  "y": 0
               },
               "id": 48,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_ECC_DBE_VOL_TOTAL{Hostname=~\"$hostname\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "Total number of double-bit volatile ECC errors",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "cps"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 16,
                  "y": 0
               },
               "id": 49,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_ECC_SBE_AGG_TOTAL{Hostname=~\"$hostname\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "Total number of single-bit persistent ECC errors",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "cps"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 50,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_ECC_DBE_AGG_TOTAL{Hostname=~\"$hostname\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "Total number of double-bit persistent ECC errors",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "cps"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 8,
                  "y": 0
               },
               "id": 51,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_UNCORRECTABLE_REMAPPED_ROWS{Hostname=~\"$hostname\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "Number of remapped rows for uncorrectable errors",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "cps"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 16,
                  "y": 0
               },
               "id": 52,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_CORRECTABLE_REMAPPED_ROWS{Hostname=~\"$hostname\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "Number of remapped rows for correctable errors",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "cps"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 53,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_ROW_REMAP_FAILURE{Hostname=~\"$hostname\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "Whether remapping of rows has failed",
               "type": "timeseries"
            }
         ],
         "title": "GPU Errors",
         "type": "row"
      },
      {
         "collapsed": true,
         "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 6
         },
         "id": 54,
         "panels": [
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "KBs"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 55,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "sum by(gpu) (nvlink_data_tx_kib{hostname=~\"$hostname\",gpu=~\"$gpu\"})",
                     "legendFormat": "Total NVLink bandwidth usage by gpu {{ gpu }}"
                  }
               ],
               "title": "Total data transmitted",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "KBs"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 8,
                  "y": 0
               },
               "id": 56,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "sum by(gpu) (nvlink_data_rx_kib{hostname=~\"$hostname\",gpu=~\"$gpu\"})",
                     "legendFormat": "Total NVLink bandwidth usage by gpu {{ gpu }}"
                  }
               ],
               "title": "Total data received",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "KBs"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 16,
                  "y": 0
               },
               "id": 57,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "sum by(gpu) (nvlink_raw_tx_kib{hostname=~\"$hostname\",gpu=~\"$gpu\"})",
                     "legendFormat": "Total NVLink bandwidth usage by gpu {{ gpu }}"
                  }
               ],
               "title": "Total raw bytes transmitted",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "KBs"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 58,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "sum by(gpu) (nvlink_raw_rx_kib{hostname=~\"$hostname\",gpu=~\"$gpu\"})",
                     "legendFormat": "Total NVLink bandwidth usage by gpu {{ gpu }}"
                  }
               ],
               "title": "Total raw bytes received",
               "type": "timeseries"
            }
         ],
         "title": "NVLink Metrics",
         "type": "row"
      },
      {
         "collapsed": true,
         "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 7
         },
         "id": 59,
         "panels": [
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "MiBs"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 60,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "(ib_port_xmit_data{hostname=~\"$hostname\",interface=~\"$interface\"})",
                     "legendFormat": "host {{ hostname }} and nic {{ interface }}"
                  }
               ],
               "title": "Total number of data octets transmitted",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "MiBs"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 8,
                  "y": 0
               },
               "id": 61,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "(ib_port_rcv_data{hostname=~\"$hostname\",interface=~\"$interface\"})",
                     "legendFormat": "host {{ hostname }} and nic {{ interface }}"
                  }
               ],
               "title": "Total number of data octets received",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "pps"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 16,
                  "y": 0
               },
               "id": 62,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "(ib_port_xmit_packets{hostname=~\"$hostname\",interface=~\"$interface\"})",
                     "legendFormat": "host {{ hostname }} and nic {{ interface }}"
                  }
               ],
               "title": "Total number of packets transmitted",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "pps"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 63,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "(ib_port_rcv_packets{hostname=~\"$hostname\",interface=~\"$interface\"})",
                     "legendFormat": "host {{ hostname }} and nic {{ interface }}"
                  }
               ],
               "title": "Total number of packets received",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "pps"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 8,
                  "y": 0
               },
               "id": 64,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "(ib_unicast_rcv_packets{hostname=~\"$hostname\",interface=~\"$interface\"})",
                     "legendFormat": "host {{ hostname }} and nic {{ interface }}"
                  }
               ],
               "title": "Total number of unicast packets received",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "pps"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 16,
                  "y": 0
               },
               "id": 65,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "(ib_unicast_xmit_packets{hostname=~\"$hostname\",interface=~\"$interface\"})",
                     "legendFormat": "host {{ hostname }} and nic {{ interface }}"
                  }
               ],
               "title": "Total number of unicast packets transmitted",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "pps"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 66,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "(ib_multicast_rcv_packets{hostname=~\"$hostname\",interface=~\"$interface\"})",
                     "legendFormat": "host {{ hostname }} and nic {{ interface }}"
                  }
               ],
               "title": "Total number of multicast packets received",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "pps"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 8,
                  "y": 0
               },
               "id": 67,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "(ib_multicast_xmit_packets{hostname=~\"$hostname\",interface=~\"$interface\"})",
                     "legendFormat": "host {{ hostname }} and nic {{ interface }}"
                  }
               ],
               "title": "Total number of multicast packets transmitted",
               "type": "timeseries"
            }
         ],
         "title": "ROCEv2 Port Metrics",
         "type": "row"
      },
      {
         "collapsed": true,
         "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 8
         },
         "id": 68,
         "panels": [
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "none"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 69,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "(rdma_np_ecn_marked_roce_packets{hostname=~\"$hostname\",interface=~\"$interface\"})",
                     "legendFormat": "host {{ hostname }} and nic {{ interface }}"
                  }
               ],
               "title": "Number of ROCEv2 packets marked for congestion",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "none"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 8,
                  "y": 0
               },
               "id": 70,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "(rdma_out_of_sequence{hostname=~\"$hostname\",interface=~\"$interface\"})",
                     "legendFormat": "host {{ hostname }} and nic {{ interface }}"
                  }
               ],
               "title": "Number of out of sequence packets received",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "none"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 16,
                  "y": 0
               },
               "id": 71,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "(rdma_packet_seq_err{hostname=~\"$hostname\",interface=~\"$interface\"})",
                     "legendFormat": "host {{ hostname }} and nic {{ interface }}"
                  }
               ],
               "title": "Number of received NAK sequence error packets",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "none"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 72,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "(rdma_local_ack_timeout_err{hostname=~\"$hostname\",interface=~\"$interface\"})",
                     "legendFormat": "host {{ hostname }} and nic {{ interface }}"
                  }
               ],
               "title": "Number of times QPs ack timer expired",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "none"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 8,
                  "y": 0
               },
               "id": 73,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "(rdma_roce_adp_retrans{hostname=~\"$hostname\",interface=~\"$interface\"})",
                     "legendFormat": "host {{ hostname }} and nic {{ interface }}"
                  }
               ],
               "title": "Number of adaptive retransmissions for RoCE traffic",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "none"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 16,
                  "y": 0
               },
               "id": 74,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "(rdma_np_cnp_sent{hostname=~\"$hostname\",interface=~\"$interface\"})",
                     "legendFormat": "host {{ hostname }} and nic {{ interface }}"
                  }
               ],
               "title": "Number of CNP packets sent",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "none"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 75,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "(rdma_rp_cnp_handled{hostname=~\"$hostname\",interface=~\"$interface\"})",
                     "legendFormat": "host {{ hostname }} and nic {{ interface }}"
                  }
               ],
               "title": "Number of CNP packets handled to throttle",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "none"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 8,
                  "y": 0
               },
               "id": 76,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "(rdma_rp_cnp_ignored{hostname=~\"$hostname\",interface=~\"$interface\"})",
                     "legendFormat": "host {{ hostname }} and nic {{ interface }}"
                  }
               ],
               "title": "Number of CNP packets received and ignored",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "none"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 16,
                  "y": 0
               },
               "id": 77,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "(rdma_rx_icrc_encapsulated{hostname=~\"$hostname\",interface=~\"$interface\"})",
                     "legendFormat": "host {{ hostname }} and nic {{ interface }}"
                  }
               ],
               "title": "Number of RoCE packets with ICRC (Invertible Cyclic Redundancy Check) errors",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "none"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 78,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "(rdma_roce_slow_restart{hostname=~\"$hostname\",interface=~\"$interface\"})",
                     "legendFormat": "host {{ hostname }} and nic {{ interface }}"
                  }
               ],
               "title": "Number of times RoCE slow restart was used",
               "type": "timeseries"
            }
         ],
         "title": "ROCEv2 Congestion Metrics",
         "type": "row"
      }
   ],
   "schemaVersion": 39,
   "templating": {
      "list": [
         {
            "hide": 1,
            "name": "PROMETHEUS_DS",
            "query": "prometheus",
            "type": "datasource"
         },
         {
            "datasource": {
               "type": "prometheus",
               "uid": "${PROMETHEUS_DS}"
            },
            "includeAll": true,
            "multi": true,
            "name": "AD",
            "query": "label_values(up, AD)",
            "refresh": 1,
            "type": "query"
         },
         {
            "datasource": {
               "type": "prometheus",
               "uid": "${PROMETHEUS_DS}"
            },
            "includeAll": true,
            "multi": true,
            "name": "compartment",
            "query": "label_values(up, compartment)",
            "refresh": 1,
            "type": "query"
         },
         {
            "datasource": {
               "type": "prometheus",
               "uid": "${PROMETHEUS_DS}"
            },
            "includeAll": true,
            "multi": true,
            "name": "rackID",
            "query": "label_values(up, rackID)",
            "refresh": 1,
            "type": "query"
         },
         {
            "datasource": {
               "type": "prometheus",
               "uid": "${PROMETHEUS_DS}"
            },
            "includeAll": true,
            "multi": true,
            "name": "rail_id",
            "query": "label_values(up, rail_id)",
            "refresh": 1,
            "type": "query"
         },
         {
            "datasource": {
               "type": "prometheus",
               "uid": "${PROMETHEUS_DS}"
            },
            "includeAll": true,
            "multi": true,
            "name": "hpc_island",
            "query": "label_values(up, hpc_island)",
            "refresh": 1,
            "type": "query"
         },
         {
            "datasource": {
               "type": "prometheus",
               "uid": "${PROMETHEUS_DS}"
            },
            "includeAll": true,
            "multi": true,
            "name": "cluster_name",
            "query": "label_values(up, cluster_name)",
            "refresh": 1,
            "type": "query"
         },
         {
            "datasource": {
               "type": "prometheus",
               "uid": "${PROMETHEUS_DS}"
            },
            "includeAll": true,
            "multi": true,
            "name": "hostname",
            "query": "label_values(DCGM_FI_DEV_GPU_UTIL, Hostname)",
            "refresh": 1,
            "type": "query"
         },
         {
            "datasource": {
               "type": "prometheus",
               "uid": "${PROMETHEUS_DS}"
            },
            "includeAll": true,
            "multi": true,
            "name": "hostname",
            "query": "label_values(DCGM_FI_DEV_GPU_UTIL, Hostname)",
            "refresh": 1,
            "type": "query"
         },
         {
            "datasource": {
               "type": "prometheus",
               "uid": "${PROMETHEUS_DS}"
            },
            "includeAll": true,
            "multi": true,
            "name": "fss_mount",
            "query": "label_values(up, fss_mount)",
            "refresh": 1,
            "type": "query"
         },
         {
            "datasource": {
               "type": "prometheus",
               "uid": "${PROMETHEUS_DS}"
            },
            "includeAll": true,
            "multi": true,
            "name": "mountpoint",
            "query": "label_values(node_filesystem_free_bytes, mountpoint)",
            "refresh": 1,
            "type": "query"
         },
         {
            "datasource": {
               "type": "prometheus",
               "uid": "${PROMETHEUS_DS}"
            },
            "includeAll": true,
            "multi": true,
            "name": "fstype",
            "query": "label_values(node_filesystem_free_bytes, fstype)",
            "refresh": 1,
            "type": "query"
         },
         {
            "datasource": {
               "type": "prometheus",
               "uid": "${PROMETHEUS_DS}"
            },
            "includeAll": true,
            "multi": true,
            "name": "device",
            "query": "label_values(node_network_receive_bytes_total, device)",
            "refresh": 1,
            "type": "query"
         },
         {
            "datasource": {
               "type": "prometheus",
               "uid": "${PROMETHEUS_DS}"
            },
            "includeAll": true,
            "multi": true,
            "name": "interface",
            "query": "label_values(rdma_np_ecn_marked_roce_packets, interface)",
            "refresh": 1,
            "type": "query"
         },
         {
            "datasource": {
               "type": "prometheus",
               "uid": "${PROMETHEUS_DS}"
            },
            "includeAll": true,
            "multi": true,
            "name": "gpu",
            "query": "label_values(DCGM_FI_DEV_GPU_UTIL, gpu)",
            "refresh": 1,
            "type": "query"
         }
      ]
   },
   "time": {
      "from": "now-6h",
      "to": "now"
   },
   "timezone": "browser",
   "title": "Cluster Dashboard",
   "uid": "cluster-dashboard"
}
