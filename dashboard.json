{
   "description": "Dashboard for GPU Clusters\n",
   "graphTooltip": 1,
   "panels": [
      {
         "collapsed": true,
         "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 0
         },
         "id": 1,
         "panels": [
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "percent"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 2,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by (cluster_name) (node_load1)",
                     "legendFormat": "1m load average {{cluster_name}}"
                  }
               ],
               "title": "Cluster 1m load average",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "percent"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 8,
                  "y": 0
               },
               "id": 3,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by (cluster_name) (node_load5)",
                     "legendFormat": "5m load average {{cluster_name}}"
                  }
               ],
               "title": "Cluster 5m load average",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "percent"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 16,
                  "y": 0
               },
               "id": 4,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by (cluster_name) (node_load15)",
                     "legendFormat": "15m load average {{cluster_name}}"
                  }
               ],
               "title": "Cluster 15m load average",
               "type": "timeseries"
            }
         ],
         "title": "Cluster",
         "type": "row"
      },
      {
         "collapsed": true,
         "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 1
         },
         "id": 5,
         "panels": [
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "percent"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 6,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "(node_load1{oci_name=~\"$oci_name\"})",
                     "legendFormat": "{{oci_name}}"
                  }
               ],
               "title": "Instance 1m load average",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "percent"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 8,
                  "y": 0
               },
               "id": 7,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "(node_load5{oci_name=~\"$oci_name\"})",
                     "legendFormat": "{{oci_name}}"
                  }
               ],
               "title": "Instance 5m load average",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "percent"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 16,
                  "y": 0
               },
               "id": 8,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "(node_load15{oci_name=~\"$oci_name\"})",
                     "legendFormat": "{{oci_name}}"
                  }
               ],
               "title": "Instance 15m load average",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "percent"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 9,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "ceil((1 - (node_memory_MemAvailable_bytes{oci_name=~\"$oci_name\"}/node_memory_MemTotal_bytes{oci_name=~\"$oci_name\"}))*100)",
                     "legendFormat": "{{oci_name}}"
                  }
               ],
               "title": "Memory utilization",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "percent"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 8,
                  "y": 0
               },
               "id": 10,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "ceil((1 - (node_filesystem_avail_bytes{mountpoint=~\"$mountpoint\",device!~\"rootfs\"} / node_filesystem_size_bytes{mountpoint=~\"$mountpoint\",device!~\"rootfs\"}))*100)",
                     "legendFormat": "{{mountpoint}}"
                  }
               ],
               "title": "Storage utilization",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "bytes"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 16,
                  "y": 0
               },
               "id": 11,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "rate(node_network_receive_bytes_total{oci_name=~\"$oci_name\",device=~\"$device\"}[$__rate_interval])",
                     "legendFormat": "{{oci_name}} {{device}}"
                  }
               ],
               "title": "Network Traffic Received",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "bytes"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 12,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "rate(node_network_transmit_bytes_total{oci_name=~\"$oci_name\",device=~\"$device\"}[$__rate_interval])",
                     "legendFormat": "{{oci_name}} {{device}}"
                  }
               ],
               "title": "Network Traffic Sent",
               "type": "timeseries"
            }
         ],
         "title": "Node",
         "type": "row"
      },
      {
         "collapsed": true,
         "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 2
         },
         "id": 13,
         "panels": [
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "hertz"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 14,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_SM_CLOCK{Hostname=~\"$oci_name\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "SM Clock",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "hertz"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 8,
                  "y": 0
               },
               "id": 15,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_MEM_CLOCK{Hostname=~\"$oci_name\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "Memory Clock",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "celsius"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 16,
                  "y": 0
               },
               "id": 16,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_MEMORY_TEMP{Hostname=~\"$oci_name\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "Memory temperature (in C)",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "celsius"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 17,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_GPU_TEMP{Hostname=~\"$oci_name\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "GPU temperature (in C)",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "watts"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 8,
                  "y": 0
               },
               "id": 18,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_POWER_USAGE{Hostname=~\"$oci_name\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "Power draw (in W)",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "joules"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 16,
                  "y": 0
               },
               "id": 19,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_TOTAL_ENERGY_CONSUMPTION{Hostname=~\"$oci_name\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "Total energy consumption since boot (in mJ)",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "none"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 20,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_PCIE_REPLAY_COUNTER{Hostname=~\"$oci_name\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "Total number of PCIe retries",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "percent"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 8,
                  "y": 0
               },
               "id": 21,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_GPU_UTIL{Hostname=~\"$oci_name\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "GPU Utilization",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "percent"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 16,
                  "y": 0
               },
               "id": 22,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_MEM_COPY_UTIL{Hostname=~\"$oci_name\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "Memory Copy Utilization",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "percent"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 23,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_ENC_UTIL{Hostname=~\"$oci_name\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "Encoder Utilization",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "percent"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 8,
                  "y": 0
               },
               "id": 24,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_DEC_UTIL{Hostname=~\"$oci_name\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "Decoder Utilization",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "none"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 16,
                  "y": 0
               },
               "id": 25,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_XID_ERRORS{Hostname=~\"$oci_name\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "Value of the last XID error encountered",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "megabytes"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 26,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_FB_FREE{Hostname=~\"$oci_name\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "Framebuffer memory free (in MiB)",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "megabytes"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 8,
                  "y": 0
               },
               "id": 27,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_FB_USED{Hostname=~\"$oci_name\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "Framebuffer memory used (in MiB)",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "none"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 16,
                  "y": 0
               },
               "id": 28,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_VGPU_LICENSE_STATUS{Hostname=~\"$oci_name\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "vGPU License status",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "none"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 29,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_NVLINK_BANDWIDTH_TOTAL{Hostname=~\"$oci_name\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "Total number of NVLink bandwidth counters for all lanes",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "none"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 8,
                  "y": 0
               },
               "id": 30,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_UNCORRECTABLE_REMAPPED_ROWS{Hostname=~\"$oci_name\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "Number of remapped rows for uncorrectable errors",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "none"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 16,
                  "y": 0
               },
               "id": 31,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_CORRECTABLE_REMAPPED_ROWS{Hostname=~\"$oci_name\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "Number of remapped rows for correctable errors",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "none"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 32,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "avg by(Hostname) (DCGM_FI_DEV_ROW_REMAP_FAILURE{Hostname=~\"$oci_name\"})",
                     "legendFormat": "Host {{ Hostname }}"
                  }
               ],
               "title": "Whether remapping of rows has failed",
               "type": "timeseries"
            }
         ],
         "title": "GPU",
         "type": "row"
      },
      {
         "collapsed": true,
         "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 3
         },
         "id": 33,
         "panels": [
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "none"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 34,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "(rdma_np_ecn_marked_roce_packets{hostname=~\"$oci_name\",interface=~\"$interface\"})",
                     "legendFormat": "RDMA hardware counters by host {{ oci_name }} and nic {{ interface }}"
                  }
               ],
               "title": "Number of ROCEv2 packets marked for congestion",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "none"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 8,
                  "y": 0
               },
               "id": 35,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "(rdma_out_of_sequence{hostname=~\"$oci_name\",interface=~\"$interface\"})",
                     "legendFormat": "RDMA hardware counters by host {{ oci_name }} and nic {{ interface }}"
                  }
               ],
               "title": "Number of out of sequence packets received",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "none"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 16,
                  "y": 0
               },
               "id": 36,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "(rdma_packet_seq_err{hostname=~\"$oci_name\",interface=~\"$interface\"})",
                     "legendFormat": "RDMA hardware counters by host {{ oci_name }} and nic {{ interface }}"
                  }
               ],
               "title": "Number of received NAK sequence error packets",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "none"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 37,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "(rdma_local_ack_timeout_err{hostname=~\"$oci_name\",interface=~\"$interface\"})",
                     "legendFormat": "RDMA hardware counters by host {{ oci_name }} and nic {{ interface }}"
                  }
               ],
               "title": "Number of times QPs ack timer expired",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "none"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 8,
                  "y": 0
               },
               "id": 38,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "(rdma_roce_adp_retrans{hostname=~\"$oci_name\",interface=~\"$interface\"})",
                     "legendFormat": "RDMA hardware counters by host {{ oci_name }} and nic {{ interface }}"
                  }
               ],
               "title": "Number of adaptive retransmissions for RoCE traffic",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "none"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 16,
                  "y": 0
               },
               "id": 39,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "(rdma_np_cnp_sent{hostname=~\"$oci_name\",interface=~\"$interface\"})",
                     "legendFormat": "RDMA hardware counters by host {{ oci_name }} and nic {{ interface }}"
                  }
               ],
               "title": "Number of CNP packets sent",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "none"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 40,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "(rdma_rp_cnp_handled{hostname=~\"$oci_name\",interface=~\"$interface\"})",
                     "legendFormat": "RDMA hardware counters by host {{ oci_name }} and nic {{ interface }}"
                  }
               ],
               "title": "Number of CNP packets handled to throttle",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "none"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 8,
                  "y": 0
               },
               "id": 41,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "(rdma_rp_cnp_ignored{hostname=~\"$oci_name\",interface=~\"$interface\"})",
                     "legendFormat": "RDMA hardware counters by host {{ oci_name }} and nic {{ interface }}"
                  }
               ],
               "title": "Number of CNP packets received and ignored",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "none"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 16,
                  "y": 0
               },
               "id": 42,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "(rdma_rx_icrc_encapsulated{hostname=~\"$oci_name\",interface=~\"$interface\"})",
                     "legendFormat": "RDMA hardware counters by host {{ oci_name }} and nic {{ interface }}"
                  }
               ],
               "title": "Number of RoCE packets with ICRC (Invertible Cyclic Redundancy Check) errors",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "none"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 43,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "(rdma_roce_slow_restart{hostname=~\"$oci_name\",interface=~\"$interface\"})",
                     "legendFormat": "RDMA hardware counters by host {{ oci_name }} and nic {{ interface }}"
                  }
               ],
               "title": "Number of times RoCE slow restart was used",
               "type": "timeseries"
            }
         ],
         "title": "RDMA",
         "type": "row"
      },
      {
         "collapsed": true,
         "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 4
         },
         "id": 44,
         "panels": [
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "KB"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 45,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "sum by(gpu) (nvlink_data_tx_kib{hostname=~\"$oci_name\",gpu=~\"$gpu\"})",
                     "legendFormat": "Total NVLink bandwidth usage by host {{ oci_name }} and gpu {{ gpu }}"
                  }
               ],
               "title": "Total data in KiB transmitted",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "KB"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 8,
                  "y": 0
               },
               "id": 46,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "sum by(gpu) (nvlink_data_rx_kib{hostname=~\"$oci_name\",gpu=~\"$gpu\"})",
                     "legendFormat": "Total NVLink bandwidth usage by host {{ oci_name }} and gpu {{ gpu }}"
                  }
               ],
               "title": "Total data in KiB received",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "KB"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 16,
                  "y": 0
               },
               "id": 47,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "sum by(gpu) (nvlink_raw_tx_kib{hostname=~\"$oci_name\",gpu=~\"$gpu\"})",
                     "legendFormat": "Total NVLink bandwidth usage by host {{ oci_name }} and gpu {{ gpu }}"
                  }
               ],
               "title": "Total raw bytes in KiB transmitted",
               "type": "timeseries"
            },
            {
               "datasource": {
                  "type": "datasource",
                  "uid": "-- Mixed --"
               },
               "fieldConfig": {
                  "defaults": {
                     "unit": "KB"
                  }
               },
               "gridPos": {
                  "h": 8,
                  "w": 8,
                  "x": 0,
                  "y": 0
               },
               "id": 48,
               "pluginVersion": "v11.0.0",
               "targets": [
                  {
                     "datasource": {
                        "type": "prometheus",
                        "uid": "$PROMETHEUS_DS"
                     },
                     "expr": "sum by(gpu) (nvlink_raw_rx_kib{hostname=~\"$oci_name\",gpu=~\"$gpu\"})",
                     "legendFormat": "Total NVLink bandwidth usage by host {{ oci_name }} and gpu {{ gpu }}"
                  }
               ],
               "title": "Total raw bytes in KiB received",
               "type": "timeseries"
            }
         ],
         "title": "NVLink",
         "type": "row"
      }
   ],
   "schemaVersion": 39,
   "templating": {
      "list": [
         {
            "hide": 1,
            "name": "PROMETHEUS_DS",
            "query": "prometheus",
            "type": "datasource"
         },
         {
            "datasource": {
               "type": "prometheus",
               "uid": "${PROMETHEUS_DS}"
            },
            "multi": true,
            "name": "cluster_name",
            "query": "label_values(up, cluster_name)",
            "refresh": 1,
            "type": "query"
         },
         {
            "datasource": {
               "type": "prometheus",
               "uid": "${PROMETHEUS_DS}"
            },
            "multi": true,
            "name": "oci_name",
            "query": "label_values(up, oci_name)",
            "refresh": 1,
            "type": "query"
         },
         {
            "datasource": {
               "type": "prometheus",
               "uid": "${PROMETHEUS_DS}"
            },
            "multi": true,
            "name": "mountpoint",
            "query": "label_values(node_filesystem_free_bytes, mountpoint)",
            "refresh": 1,
            "type": "query"
         },
         {
            "datasource": {
               "type": "prometheus",
               "uid": "${PROMETHEUS_DS}"
            },
            "multi": true,
            "name": "fstype",
            "query": "label_values(node_filesystem_free_bytes, fstype)",
            "refresh": 1,
            "type": "query"
         },
         {
            "datasource": {
               "type": "prometheus",
               "uid": "${PROMETHEUS_DS}"
            },
            "multi": true,
            "name": "device",
            "query": "label_values(node_network_receive_bytes_total, device)",
            "refresh": 1,
            "type": "query"
         },
         {
            "datasource": {
               "type": "prometheus",
               "uid": "${PROMETHEUS_DS}"
            },
            "multi": true,
            "name": "interface",
            "query": "label_values(rdma_np_ecn_marked_roce_packets, interface)",
            "refresh": 1,
            "type": "query"
         },
         {
            "datasource": {
               "type": "prometheus",
               "uid": "${PROMETHEUS_DS}"
            },
            "multi": true,
            "name": "gpu",
            "query": "label_values(DCGM_FI_DEV_GPU_UTIL, gpu)",
            "refresh": 1,
            "type": "query"
         }
      ]
   },
   "time": {
      "from": "now-6h",
      "to": "now"
   },
   "timezone": "browser",
   "title": "Cluster Dashboard",
   "uid": "cluster-dashboard"
}
